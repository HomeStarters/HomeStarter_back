# 프로토타입 네비게이션 구조

## 📋 개요
내집마련 도우미 플랫폼 프로토타입의 전체 화면 간 네비게이션 구조를 정의합니다.

## 🗺️ 전체 화면 플로우

### 1. 인증 및 온보딩 플로우
```
01-로그인
  ├─→ [로그인 성공] → 00-대시보드
  └─→ [회원가입 링크] → 02-회원가입
      └─→ [가입 완료] → 03-기본정보입력
          └─→ [다음] → 05-본인자산정보입력
              ├─→ [기혼, 다음] → 06-배우자자산정보입력
              │   └─→ [완료] → 00-대시보드
              └─→ [미혼, 완료] → 00-대시보드
```

**네비게이션 특징:**
- ✅ 모든 화면에 Back 버튼 (`history.back()`) 구현
- ✅ 단계별 진행 표시 (Progress Indicator)
- ✅ 자동 저장 기능 (LocalStorage)

---

### 2. 대시보드 (00-대시보드.html)

**주요 링크:**
- **빠른 작업 섹션:**
  - 주택 등록하기 → `11-입주희망주택입력-기본정보.html`
  - 지출 계산하기 → `15-입주후지출계산.html`
  - 로드맵 보기 → `18-장기주거로드맵조회.html`

- **최근 활동 섹션:**
  - 등록한 주택 (Empty State) → `11-입주희망주택입력-기본정보.html`
  - 계산 결과 (Empty State) → `15-입주후지출계산.html`
  - 주택 카드 클릭 → `14-입주희망주택상세.html`

- **하단 탭 네비게이션:**
  - 홈 (active) → `00-대시보드.html`
  - 주택 → `13-입주희망주택목록.html`
  - 계산 → `15-입주후지출계산.html`
  - 로드맵 → `18-장기주거로드맵조회.html`

---

### 3. 주택 관련 플로우

#### 3.1 주택 등록 (2단계)
```
11-입주희망주택입력-기본정보 (Step 1/2)
  └─→ [다음] → 12-입주희망주택입력-상세정보 (Step 2/2)
      ├─→ [뒤로] → 11-입주희망주택입력-기본정보
      └─→ [저장] → 13-입주희망주택목록
```

**네비게이션 특징:**
- ✅ Back 버튼으로 이전 단계 복귀
- ✅ 단계 표시 (1/2, 2/2)
- ✅ 자동 저장 (LocalStorage: `housing_draft`)
- ✅ 유효성 검증 후 다음 단계 활성화

#### 3.2 주택 목록 (13-입주희망주택목록.html)
**네비게이션:**
- ✅ Back 버튼 → `history.back()` (대시보드로 복귀)
- ✅ FAB (+) → `11-입주희망주택입력-기본정보.html`
- ✅ 주택 카드 클릭 → `14-입주희망주택상세.html`
- ✅ **하단 탭 네비게이션 (주택 탭 active)**

**주요 기능:**
- 필터링 (전체/아파트/오피스텔/빌라)
- 정렬 (최신순/가격순/입주일순)
- 최종목표 설정 (별 아이콘)
- 비교 기능 (2개 이상 선택 시)

#### 3.3 주택 상세 (14-입주희망주택상세.html)
**네비게이션:**
- ✅ Back 버튼 → `13-입주희망주택목록.html`
- ✅ 수정 버튼 → `11-입주희망주택입력-기본정보.html?id={id}` (편집 모드)
- ✅ 계산 버튼 → `15-입주후지출계산.html?housing_id={id}`
- ✅ 삭제 버튼 → 확인 후 삭제 및 목록으로 복귀

**표시 정보:**
- 기본정보, 교통 혜택, 단지 정보, 생활환경
- 최종목표 배지
- 주택 유형 배지

---

### 4. 계산 플로우 (15-입주후지출계산.html)

**네비게이션:**
- ✅ Back 버튼 → `13-입주희망주택목록.html`
- ✅ **하단 탭 네비게이션 (계산 탭 active)**

**주요 플로우:**
1. 주택 선택 (등록된 주택 목록에서)
2. 대출 상품 선택 (정책자금/일반대출)
3. 계산 실행 (로딩 2초)
4. 결과 표시:
   - LTV/DTI/DSR 게이지
   - 대출 가능 여부
   - 월별 지출 내역
5. 결과 저장 (LocalStorage: `calculation_results`)

---

### 5. 로드맵 플로우

#### 5.1 생애주기 이벤트 관리 (17-생애주기이벤트관리.html)
**네비게이션:**
- ✅ Back 버튼 → `history.back()` (대시보드 또는 18번 화면)
- ✅ FAB (+) → 이벤트 등록 Bottom Sheet

**주요 기능:**
- Timeline 형식 이벤트 목록
- CRUD 기능 (생성/읽기/수정/삭제)
- 이벤트 유형: 결혼, 출산, 자녀교육, 은퇴, 기타
- 날짜 기준 자동 정렬
- LocalStorage 저장: `lifecycle_events`

#### 5.2 장기주거 로드맵 조회 (18-장기주거로드맵조회.html)
**네비게이션:**
- ✅ Back 버튼 → `history.back()` (대시보드)
- ✅ 로드맵 편집 → `17-생애주기이벤트관리.html`
- ✅ **하단 탭 네비게이션 (로드맵 탭 active)**

**주요 기능:**
- 수평 스크롤 Timeline
- 단계별 카드 (신혼집 → 자녀 양육집 → 최종목표)
- 생애주기 이벤트 마커
- 단계별 상세 정보 (Bottom Sheet)
- 실행 가이드 (진행률 표시)
- PDF 다운로드/공유 (프로토타입에서 비활성화)

---

## 🎯 하단 탭 네비게이션 (Bottom Navigation)

**적용 화면:**
- `00-대시보드.html` (홈 active)
- `13-입주희망주택목록.html` (주택 active)
- `15-입주후지출계산.html` (계산 active)
- `18-장기주거로드맵조회.html` (로드맵 active)

**탭 구성:**
1. **홈** (00-대시보드.html)
   - 아이콘: 집 모양
   - 재무 현황 대시보드

2. **주택** (13-입주희망주택목록.html)
   - 아이콘: 집 모양
   - 등록된 주택 목록

3. **계산** (15-입주후지출계산.html)
   - 아이콘: 시계/계산기
   - 입주 후 지출 계산기

4. **로드맵** (18-장기주거로드맵조회.html)
   - 아이콘: 폴더/문서
   - 장기주거 로드맵

**반응형:**
- Mobile: 항상 표시
- Tablet/Desktop: 디자인에 따라 표시/숨김 가능

---

## 🔄 Back 버튼 구현 패턴

**모든 화면 공통:**
```html
<button class="btn-back" onclick="history.back()" aria-label="뒤로 가기">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
</button>
```

**적용 화면:**
- ✅ 02-회원가입
- ✅ 03-기본정보입력
- ✅ 05-본인자산정보입력
- ✅ 06-배우자자산정보입력
- ✅ 11-입주희망주택입력-기본정보
- ✅ 12-입주희망주택입력-상세정보
- ✅ 13-입주희망주택목록
- ✅ 14-입주희망주택상세
- ✅ 15-입주후지출계산
- ✅ 17-생애주기이벤트관리
- ✅ 18-장기주거로드맵조회

---

## 💾 LocalStorage 데이터 흐름

### 인증/사용자 정보
- `auth_token`: JWT 토큰
- `current_user`: 사용자 정보

### 주택 관련
- `housing_list`: 전체 주택 목록 (Array)
- `housing_draft`: 주택 등록 임시 저장 (Object)
- `selected_housing_id`: 선택된 주택 ID
- `final_goal_housing_id`: 최종목표 주택 ID

### 재무 계산
- `calculation_results`: 계산 결과 목록 (Array)
- `self_asset`: 본인 자산 정보
- `spouse_asset`: 배우자 자산 정보

### 로드맵
- `lifecycle_events`: 생애주기 이벤트 목록 (Array)
- `housing_roadmap`: AI 생성 로드맵 (Object)

---

## 🎨 화면 전환 애니메이션

**현재 구현:**
- `window.location.href`: 일반 페이지 전환 (새로고침)
- `history.back()`: 브라우저 히스토리 기반 뒤로 가기

**향후 개선 가능:**
- CSS transitions for smooth page changes
- Loading states during navigation
- Route-based animations (slide in/out, fade)

---

## ✅ 네비게이션 구현 체크리스트

### 인증/온보딩
- [x] 로그인 → 대시보드
- [x] 로그인 → 회원가입
- [x] 회원가입 → 기본정보입력
- [x] 기본정보입력 → 자산정보입력
- [x] 자산정보입력 → 대시보드
- [x] 모든 단계에 Back 버튼

### 대시보드
- [x] 빠른 작업 링크 (주택등록, 계산, 로드맵)
- [x] 최근 활동 탭
- [x] 하단 탭 네비게이션

### 주택 관리
- [x] 주택 등록 2단계 플로우
- [x] 주택 목록 ↔ 상세
- [x] 주택 상세 → 계산
- [x] 주택 수정/삭제
- [x] 하단 탭 네비게이션 (목록)

### 계산
- [x] 주택 선택
- [x] 계산 실행
- [x] 결과 저장
- [x] 하단 탭 네비게이션

### 로드맵
- [x] 이벤트 관리 CRUD
- [x] 로드맵 조회
- [x] 로드맵 ↔ 이벤트 관리
- [x] 하단 탭 네비게이션 (로드맵)

---

## 🧪 테스트 시나리오

### 시나리오 1: 신규 사용자 온보딩
1. 01-로그인 → "회원가입" 클릭
2. 02-회원가입 → 정보 입력 후 "가입하기"
3. 03-기본정보입력 → 기본정보 입력 후 "다음"
4. 05-본인자산정보입력 → 자산정보 입력 후 "다음"
5. 06-배우자자산정보입력 (기혼시) → "완료"
6. 00-대시보드 도착 확인

### 시나리오 2: 주택 등록 및 계산
1. 00-대시보드 → "주택 등록하기" 클릭
2. 11-기본정보 → 정보 입력 후 "다음"
3. 12-상세정보 → 정보 입력 후 "저장"
4. 13-목록 → 등록된 주택 카드 클릭
5. 14-상세 → "계산하기" 클릭
6. 15-계산 → 계산 실행 및 결과 확인

### 시나리오 3: 로드맵 생성
1. 00-대시보드 → "로드맵 보기" 클릭
2. 18-로드맵 → "로드맵 편집" 클릭
3. 17-이벤트관리 → FAB로 이벤트 추가
4. 17 → Back 버튼으로 18-로드맵 복귀
5. 18 → 단계별 카드 확인

### 시나리오 4: 하단 탭 네비게이션
1. 00-대시보드 → "주택" 탭 클릭
2. 13-목록 → "계산" 탭 클릭
3. 15-계산 → "로드맵" 탭 클릭
4. 18-로드맵 → "홈" 탭 클릭
5. 00-대시보드 복귀 확인

---

## 📱 모바일 UX 고려사항

### Back 버튼
- 위치: 헤더 좌측
- 크기: 터치 영역 최소 44x44px
- 색상: Primary 또는 Text 색상
- 접근성: ARIA label 제공

### 하단 탭 네비게이션
- 위치: 화면 하단 고정
- 높이: 56-64px
- 활성 탭: Primary 색상 + 굵은 글씨
- 비활성 탭: Secondary 색상
- 접근성: ARIA role="navigation"

### FAB (Floating Action Button)
- 위치: 우측 하단 (하단 탭 위)
- 크기: 56x56px
- 색상: Primary
- 그림자: Elevation 6dp
- 주요 액션: 주택 등록, 이벤트 추가

---

## 🔍 개선 제안

### 1. 페이지 전환 애니메이션
- Slide transitions for forward/back navigation
- Fade transitions for tab switches
- Loading states during data fetch

### 2. 딥링크 지원
- URL 파라미터를 통한 직접 접근
- 예: `14-입주희망주택상세.html?id=123`

### 3. 히스토리 관리
- Browser history API 활용
- Breadcrumb navigation for complex flows

### 4. 오프라인 지원
- Service Worker for offline caching
- Sync when online

### 5. 접근성 개선
- Keyboard navigation support
- Screen reader announcements for route changes
- Focus management on navigation

---

## 📊 네비게이션 구조 다이어그램

```
                        01-로그인
                            │
                ┌───────────┴───────────┐
                │                       │
           [신규 사용자]              [기존 사용자]
                │                       │
        02-회원가입                00-대시보드 ────────┐
                │                       │             │
        03-기본정보입력           ┌────┴────┐       │
                │                 │         │         │
        05-본인자산정보    11-주택등록  15-계산  18-로드맵
                │                 │         │         │
        06-배우자자산정보    12-상세정보  │    17-이벤트
                │                 │         │
                └─────────┬───────┘         │
                          │                 │
                    00-대시보드 ←───────────┘
                          │
                  ┌───────┼───────┐
                  │       │       │
              13-목록  15-계산  18-로드맵
                  │
              14-상세
```

---

**문서 작성일**: 2025-12-15
**마지막 업데이트**: 2025-12-15
**작성자**: Claude Code (AI Assistant)
